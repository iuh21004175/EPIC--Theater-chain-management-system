<!DOCTYPE html>
<html lang="vi">
<head>
 <meta charset="UTF-8">
 <title>Đặt vé - EPIC CINEMAS</title>
 <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
<?php echo $this->runChild('customer.layout.header'); ?>
<main>
 <section class="container mx-auto max-w-screen-xl px-4">
 <div class="relative w-full h-72 md:h-80 lg:h-96 bg-black">
 <img src="https://cdn.galaxycine.vn/media/2025/8/14/mua-do-500_1755156035605.jpg" 
 alt="Mưa Đỏ Poster" 
 class="w-full h-full object-cover opacity-70">
 <div class="absolute inset-0 poster-overlay"></div>
 <div class="absolute inset-0 flex items-center justify-center">
 <button class="flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-white/30 backdrop-blur-sm text-white text-2xl md:text-3xl transition-transform duration-300 hover:scale-110">
 <i class="fas fa-play"></i>
 </button>
 </div>
 </div>

 <div class="container mx-auto max-w-4xl px-4 mt-6 relative">
 <div class="flex flex-col md:flex-row gap-8">
 <div class="w-full md:w-1/3 flex-shrink-0 -mt-16 md:-mt-24">
 <img src="https://cdn.galaxycine.vn/media/2025/8/14/mua-do-500_1755156035605.jpg" 
 alt="Mưa Đỏ Poster" 
 class="w-full rounded-xl shadow-lg">
 </div>

 <div class="w-full md:w-2/3 bg-white rounded-xl shadow-lg p-6">
 <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-4">
 <div>
 <h1 class="text-3xl md:text-4xl font-bold flex items-center gap-2">
 Mưa Đỏ
 <span class="text-sm px-2 py-1 bg-red-600 text-white font-bold rounded">T13</span>
 </h1>

 <!-- Dòng thông tin bổ sung -->
 <div class="text-gray-600 mt-1 text-sm md:text-base">
 <span class="mr-4"><strong>Thời lượng:</strong> 133 phút</span>
 <span><strong>Khởi chiếu:</strong> 27/08/2025</span>
 </div>

 <!-- Đánh giá sao -->
 <div class="flex items-center mt-2">
 <!-- Ngôi sao vàng -->
 <svg class="w-5 h-5 text-yellow-400 mr-1" fill="currentColor" viewBox="0 0 576 512">
 <path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/>
 </svg>
 <span class="text-gray-800 font-semibold text-sm md:text-base">4.6 (300 votes)</span>
 </div>
 </div>
 </div>

 <div class="text-sm text-gray-700 space-y-1">
 <p><strong>Quốc gia:</strong> Việt Nam</p>
 <p><strong>Nhà sản xuất:</strong> Bluebells Studios</p>
 <p><strong>Thể loại:</strong> Hành Động, Tâm Lý, Tình Cảm</p>
 <p><strong>Đạo diễn:</strong> Đặng Thái Huyền</p>
 <p><strong>Diễn viên:</strong> Diệp Bảo Ngọc, Vô Tấn Phát</p>
 </div>
 </div>
 </div>
 </section>

 <!-- Nội dung phim -->
 <section class="w-full px-4 mt-8">
 <div class="w-full max-w-screen-xl mx-auto bg-white rounded-xl shadow-lg p-6">
 <div class="flex items-center mb-2">
 <div class="w-1 h-6 bg-red-600 mr-2"></div>
 <h3 class="text-xl font-bold">Nội dung phim</h3>
 </div>
 <p class="text-gray-700">
 Một bộ phim về cuộc chiến đấu ác liệt của những người lính Điện ảnh Quân đội Nhân dân. Họ không chỉ cầm súng mà còn ghi lại những hình ảnh lịch sử, những khoảnh khắc bi tráng trên chiến trường. Bộ phim tái hiện chân thực sự hy sinh và lòng dũng cảm của thế hệ đi trước.
 </p>
 </div>
 </section>
 <section class="w-full px-4 mt-8">
 <div class="w-full max-w-screen-xl mx-auto bg-white rounded-xl shadow-lg p-6">
 <div class="flex items-center mb-4">
 <div class="w-1 h-6 bg-red-600 mr-2"></div>
 <h3 class="text-xl font-bold">Lịch Chiếu</h3>
 </div>

 <!-- Tabs chọn ngày -->
 <div class="flex items-center space-x-2 mb-6">
 <!-- Nút lùi -->
 <button id="prevDay" class="text-gray-400 hover:text-red-500 transition-colors p-2">
 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
 </svg>
 </button>

 <!-- Tabs ngày -->
 <div id="dayTabs" class="flex space-x-3 overflow-x-hidden flex-1"></div>

 <!-- Nút tiến -->
 <button id="nextDay" class="text-gray-400 hover:text-red-500 transition-colors p-2">
 <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
 </svg>
 </button>

 <!-- Select thành phố -->
 <div class="w-48">
 <label for="citySelect" class="block text-gray-700 font-semibold mb-1 text-sm">Chọn Thành Phố</label>
 <select id="citySelect" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm">
 <option value="tq">Toàn quốc</option>
 <option value="sg">TP. Hồ Chí Minh</option>
 <option value="hn">Hà Nội</option>
 <option value="dn">Đà Nẵng</option>
 </select>
 </div>
 <div class="w-48">
 <label for="rapSelect" class="block text-gray-700 font-semibold mb-1 text-sm">Chọn Rạp</label>
 <select id="rapSelect" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm">
 <option value="0">Tất cả rạp</option>
 <option value="1">Galaxy Nguyễn Du</option>
 <option value="2">Galaxy Tân Bình</option>
 </select>
 </div>
 </div>

 <!-- Rạp chiếu -->
 <div class="space-y-6">
 <!-- Card rạp -->
 <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
 <h4 class="text-lg font-semibold mb-2">Galaxy Nguyễn Du</h4>
 <span class="text-sm font-medium text-gray-600 mb-2 inline-block">2D Phụ Đề</span>
 <div class="grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-2">
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">11:30</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">12:15</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">12:45</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">13:15</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">14:00</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">14:30</button>
 </div>
 </div>

 <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
 <h4 class="text-lg font-semibold mb-2">Galaxy Tân Bình</h4>
 <span class="text-sm font-medium text-gray-600 mb-2 inline-block">2D Phụ Đề</span>
 <div class="grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-2">
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">11:30</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">12:15</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">13:00</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">14:00</button>
 <button class="px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-red-500 hover:text-white transition-colors">14:45</button>
 </div>
 </div>
 </div>
 </div>
</section>


 <!-- Bình luận & đánh giá -->
 <section class="w-full px-4 mt-8 mb-8">
 <div class="w-full max-w-screen-xl mx-auto bg-white rounded-xl shadow-lg p-6">
 <h3 class="text-xl font-bold mb-4">Bình luận & Đánh giá</h3>

 <!-- Form bình luận -->
 <form class="mb-6 space-y-4 p-4 border rounded-lg shadow-sm bg-white" id="commentForm">
 <!-- Avatar + tên -->
 <div class="flex items-center gap-4">
 <div class="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold">
 T
 </div>
 <span class="font-semibold text-gray-800">Tuan Dung</span>
 </div>

 <!-- Đánh giá sao -->
 <div class="flex items-center gap-2">
 <span class="text-sm font-medium">Đánh giá:</span>
 <div class="flex gap-1" id="starRating">
 <button type="button" data-value="1" class="text-2xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
 <button type="button" data-value="2" class="text-2xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
 <button type="button" data-value="3" class="text-2xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
 <button type="button" data-value="4" class="text-2xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
 <button type="button" data-value="5" class="text-2xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
 </div>
 <span id="ratingValue" class="ml-2 font-semibold text-gray-700">5</span>
 </div>

 <!-- Bình luận -->
 <textarea placeholder="Viết bình luận của bạn..." name="comment" rows="3"
 class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400" required></textarea>

 <!-- Nút gửi -->
 <div class="mt-4 flex justify-end">
 <button type="submit"
 class="px-6 py-2 bg-red-500 text-white font-semibold rounded-lg shadow hover:bg-red-600 transition-colors duration-300">
 Gửi bình luận
 </button>
 </div>
 </form>

 <!-- Danh sách bình luận -->
 <div class="space-y-4">
 <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
 <div class="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold">
 A
 </div>
 <div class="flex-1">
 <div class="flex items-center justify-between mb-1">
 <span class="font-semibold">An Nguyen</span>
 <div class="flex text-yellow-400">
 ★★★★☆
 </div>
 </div>
 <p class="text-gray-700">Phim rất hay, cảnh quay đẹp và cảm xúc mãnh liệt!</p>
 </div>
 </div>

 <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
 <div class="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold">
 L
 </div>
 <div class="flex-1">
 <div class="flex items-center justify-between mb-1">
 <span class="font-semibold">Linh Tran</span>
 <div class="flex text-yellow-400">
 ★★★★★
 </div>
 </div>
 <p class="text-gray-700">Một trong những bộ phim Việt xuất sắc nhất tôi từng xem!</p>
 </div>
 </div>
 </div>
 </div>
 </section>

</main>
<?php echo $this->runChild('customer.layout.footer'); ?>

<script>
const stars = document.querySelectorAll('#starRating button');
const ratingValue = document.getElementById('ratingValue');
let currentRating = 5; // mặc định 5 sao

// Cập nhật màu sao
function updateStars(rating) {
 stars.forEach(star => {
 if(star.dataset.value <= rating){
 star.classList.add('text-yellow-400');
 star.classList.remove('text-gray-300');
 } else {
 star.classList.add('text-gray-300');
 star.classList.remove('text-yellow-400');
 }
 });
}

// Click vào sao
stars.forEach(star => {
 star.addEventListener('click', () => {
 currentRating = star.dataset.value;
 ratingValue.textContent = currentRating;
 updateStars(currentRating);
 });
});

// Khi load trang, tô 5 sao
updateStars(currentRating);


const dayTabs = document.getElementById('dayTabs');
const nextBtn = document.getElementById('nextDay');
const prevBtn = document.getElementById('prevDay');

let startDate = new Date(); // Hôm nay
let visibleDays = 7; // số ngày hiển thị
let currentStartIndex = 0; // chỉ số ngày đầu tiên đang hiển thị
let allDays = [];
let activeIndex = 0; // chỉ số ngày đang được chọn trong allDays

// Tạo danh sách ngày (30 ngày từ hôm nay)
for (let i = 0; i < 30; i++) {
 let d = new Date(startDate);
 d.setDate(d.getDate() + i);
 allDays.push(d);
}

// Hàm format
function formatDate(d) { 
 return ("0"+d.getDate()).slice(-2) + "/" + ("0"+(d.getMonth()+1)).slice(-2); 
}

function formatWeekday(d) { 
 const weekdays = ["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"];
 return weekdays[d.getDay()];
}

// Render ngày
function renderDays() {
 dayTabs.innerHTML = '';
 for (let i = currentStartIndex; i < currentStartIndex + visibleDays; i++) {
 if(!allDays[i]) continue;

 const btn = document.createElement('button');
 btn.className = 'flex-shrink-0 text-center px-4 py-2 rounded-lg border border-gray-300 font-semibold text-gray-700 hover:bg-red-500 hover:text-white transition-colors';
 btn.innerHTML = `${formatWeekday(allDays[i])}<br>${formatDate(allDays[i])}`;

 // Tô màu nếu là active
 if(i === activeIndex) {
 btn.classList.add('bg-red-600','text-white');
 btn.classList.remove('text-gray-700','border-gray-300');
 }

 // Click vào ngày
 btn.addEventListener('click', () => {
 activeIndex = i;
 renderDays(); // re-render để cập nhật màu
 });

 dayTabs.appendChild(btn);
 }
}

// Nút ">"
nextBtn.addEventListener('click', () => {
 if(currentStartIndex + visibleDays < allDays.length){
 currentStartIndex++;
 renderDays();
 }
});

// Nút "<"
prevBtn.addEventListener('click', () => {
 if(currentStartIndex > 0){
 currentStartIndex--;
 renderDays();
 }
});

// Render lần đầu
renderDays();

</script>
</body>
</html>